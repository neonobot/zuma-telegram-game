<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=0.5, user-scalable=yes">
    <title>Zuma Telegram Game</title>
    
    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <!-- SVG —Å–ø—Ä–∞–π—Ç—ã -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <symbol id="frog-idle" viewBox="0 0 100 100">
            <circle cx="50" cy="50" r="45" fill="#4CAF50" stroke="#388E3C" stroke-width="2"/>
            <circle cx="35" cy="40" r="10" fill="white"/>
            <circle cx="65" cy="40" r="10" fill="white"/>
            <circle cx="35" cy="40" r="5" fill="#222"/>
            <circle cx="65" cy="40" r="5" fill="#222"/>
            <path d="M40,65 Q50,75 60,65" stroke="#388E3C" stroke-width="3" fill="none"/>
            <circle cx="50" cy="30" r="3" fill="#388E3C"/>
        </symbol>
        
        <symbol id="frog-aim" viewBox="0 0 100 100">
            <circle cx="50" cy="50" r="45" fill="#4CAF50" stroke="#388E3C" stroke-width="2"/>
            <circle cx="30" cy="40" r="12" fill="white"/>
            <circle cx="70" cy="40" r="12" fill="white"/>
            <circle cx="30" cy="40" r="6" fill="#222"/>
            <circle cx="70" cy="40" r="6" fill="#222"/>
            <path d="M40,65 Q50,80 60,65" stroke="#388E3C" stroke-width="3" fill="none"/>
            <circle cx="50" cy="25" r="3" fill="#388E3C"/>
        </symbol>
    </svg>

    
    <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        touch-action: manipulation;
    }
    
    html, body {
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: #F8F3D6;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    }
    
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        background: linear-gradient(135deg, #F8F3D6 0%, #E9F5DB 50%, #D4EDDA 100%);
        -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
    }
    
    #gameContainer {
        position: relative;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 
            0 20px 40px rgba(0, 0, 0, 0.1),
            0 0 0 4px #FFD700,
            0 0 0 8px rgba(255, 215, 0, 0.3);
        max-width: 100%;
        max-height: 100vh;
        background: linear-gradient(135deg, #a8e6cf 0%, #dcedc1 100%);
        aspect-ratio: 4/3;
        width: min(800px, 95vw, 95vh * 1.333);
        height: auto;
    }
    
    #gameCanvas {
        display: block;
        width: 100%;
        height: 100%;
        touch-action: none;
    }
    
    #ui {
        position: absolute;
        top: 15px;
        left: 15px;
        color: white;
        z-index: 10;
        font-size: min(4vw, 18px);
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        background: rgba(0, 0, 0, 0.7);
        padding: min(2vw, 10px) min(3vw, 15px);
        border-radius: 10px;
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        pointer-events: none;
        white-space: nowrap;
    }
    
    .game-buttons {
        position: absolute;
        bottom: 20px;
        right: 20px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        z-index: 100;
    }
    
    .game-btn {
        padding: min(2vw, 12px) min(3vw, 20px);
        background: rgba(255, 255, 255, 0.95);
        border: 2px solid #FFD700;
        border-radius: 25px;
        color: #4CAF50;
        font-size: min(3.5vw, 16px);
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transition: all 0.2s;
        font-family: inherit;
        touch-action: manipulation;
        -webkit-appearance: none;
        appearance: none;
        min-height: 44px;
        min-width: 44px;
    }
    
    .game-btn:hover, .game-btn:active {
        background: rgba(255, 215, 0, 0.95);
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }
    
    .mobile-controls {
        display: none;
        position: absolute;
        bottom: max(20px, env(safe-area-inset-bottom));
        left: 0;
        right: 0;
        justify-content: space-around;
        padding: 0 min(5vw, 25px);
        z-index: 100;
        gap: min(5vw, 20px);
    }
    
    .mobile-btn {
        width: min(20vw, 75px);
        height: min(20vw, 75px);
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.95);
        border: 3px solid #FFD700;
        color: #4CAF50;
        font-size: min(8vw, 32px);
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 
            0 6px 15px rgba(0, 0, 0, 0.15),
            inset 0 2px 4px rgba(255, 255, 255, 0.8);
        transition: all 0.1s;
        touch-action: manipulation;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
        min-height: 44px;
        min-width: 44px;
    }
    
    .mobile-btn:active {
        transform: scale(0.92);
        background: rgba(255, 215, 0, 0.95);
        box-shadow: 
            0 3px 8px rgba(0, 0, 0, 0.1),
            inset 0 2px 6px rgba(255, 255, 255, 0.6);
    }
    
    #shootBtn {
        background: linear-gradient(135deg, #FF6B6B, #FF8E8E);
        border-color: #FFD700;
        color: white;
        font-size: min(6vw, 24px);
        width: min(22vw, 85px);
        height: min(22vw, 85px);
    }
    
    /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
    @media (max-width: 768px), (max-height: 600px) {
        #gameContainer {
            border-radius: 0;
            width: 100vw;
            height: 100vh;
            max-width: 100%;
            max-height: 100%;
            box-shadow: none;
            border: none;
            aspect-ratio: unset;
        }
        
        #ui {
            top: max(10px, env(safe-area-inset-top));
            left: max(10px, env(safe-area-inset-left));
            font-size: min(4.5vw, 20px);
            padding: min(2.5vw, 12px) min(4vw, 18px);
        }
        
        .mobile-controls {
            display: flex;
        }
        
        .game-buttons {
            bottom: max(100px, calc(20vw + env(safe-area-inset-bottom)));
            right: max(10px, env(safe-area-inset-right));
            flex-direction: row;
        }
        
        .game-btn {
            padding: min(2.5vw, 10px) min(4vw, 15px);
            font-size: min(4vw, 14px);
        }
        
        body {
            padding: 0;
        }
    }
    
    /* –ü–µ–π–∑–∞–∂–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è */
    @media (orientation: landscape) and (max-height: 500px) {
        #gameContainer {
            height: 100vh;
            width: auto;
        }
        
        .mobile-controls {
            bottom: max(10px, env(safe-area-inset-bottom));
            padding: 0 min(3vw, 15px);
        }
        
        .mobile-btn {
            width: min(15vh, 60px);
            height: min(15vh, 60px);
            font-size: min(6vh, 24px);
        }
        
        #shootBtn {
            width: min(17vh, 70px);
            height: min(17vh, 70px);
            font-size: min(5vh, 20px);
        }
        
        #ui {
            font-size: min(3vh, 16px);
        }
        
        .game-buttons {
            bottom: max(10px, env(safe-area-inset-bottom));
            right: max(10px, env(safe-area-inset-right));
        }
    }
    
    /* –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px) scale(0.95); }
        to { opacity: 1; transform: translateY(0) scale(1); }
    }
    
    #gameContainer {
        animation: fadeIn 0.8s ease-out;
    }
    
    /* –î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
    @media (min-width: 1200px) and (min-height: 800px) {
        #gameContainer {
            width: min(1000px, 80vw);
        }
        
        #ui {
            font-size: 22px;
            padding: 15px 25px;
        }
    }
    
    /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ iOS */
    * {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    
    /* –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ */
    #gameCanvas {
        image-rendering: optimizeSpeed;
        image-rendering: -moz-crisp-edges;
        image-rendering: -webkit-optimize-contrast;
        image-rendering: optimize-contrast;
        -ms-interpolation-mode: nearest-neighbor;
    }
    
    /* –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –¥–ª—è iPhone X –∏ –Ω–æ–≤–µ–µ */
    @supports (padding: max(0px)) {
        body {
            padding-left: min(0vmin, env(safe-area-inset-left));
            padding-right: min(0vmin, env(safe-area-inset-right));
            padding-top: min(0vmin, env(safe-area-inset-top));
            padding-bottom: min(0vmin, env(safe-area-inset-bottom));
        }
    }
</style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        
        <div class="game-buttons">
            <button id="restartButton" class="game-btn" title="–†–µ—Å—Ç–∞—Ä—Ç –∏–≥—Ä—ã">üîÑ</button>
            <button id="pauseButton" class="game-btn" title="–ü–∞—É–∑–∞">‚è∏</button>
        </div>
        
        <div id="ui">
            üéØ <span id="score">0</span> | 
            üöÄ <span id="level">1</span> |
            ‚ù§Ô∏è <span id="lives">5</span>
        </div>
        
        <!-- –ú–æ–±–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ -->
        <div class="mobile-controls">
            <button class="mobile-btn" id="rotateLeft" title="–ü–æ–≤–µ—Ä–Ω—É—Ç—å –≤–ª–µ–≤–æ">‚Üê</button>
            <button class="mobile-btn" id="shootBtn" title="–í—ã—Å—Ç—Ä–µ–ª–∏—Ç—å">FIRE</button>
            <button class="mobile-btn" id="rotateRight" title="–ü–æ–≤–µ—Ä–Ω—É—Ç—å –≤–ø—Ä–∞–≤–æ">‚Üí</button>
        </div>
    </div>
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- –ò–≥—Ä–æ–≤–æ–π –¥–≤–∏–∂–æ–∫ -->
    <script src="zuma-engine.js?v=2.1"></script>
    
    <script>
        console.log('Initializing Zuma Game...');
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Telegram Web App
        if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
            console.log('Telegram Web App detected');
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã
            Telegram.WebApp.setHeaderColor('#0f3460');
            Telegram.WebApp.setBackgroundColor('#0f3460');
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram
            window.sendScoreToTelegram = function(score) {
                Telegram.WebApp.sendData(JSON.stringify({
                    action: 'updateScore',
                    score: score,
                    level: window.game?.level || 1
                }));
            };
        } else {
            console.log('Running in standalone mode');
        }
        
        // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
        function setupMobileScaling() {
            const canvas = document.getElementById('gameCanvas');
            const container = document.getElementById('gameContainer');
            
            function resizeCanvas() {
                const containerWidth = container.clientWidth;
                const containerHeight = container.clientHeight;
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω 4:3
                const targetRatio = 4/3;
                const currentRatio = containerWidth / containerHeight;
                
                let width, height;
                
                if (currentRatio > targetRatio) {
                    // –®–∏—Ä–æ–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä - –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–æ –≤—ã—Å–æ—Ç–µ
                    height = containerHeight;
                    width = height * targetRatio;
                } else {
                    // –í—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä - –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–æ —à–∏—Ä–∏–Ω–µ
                    width = containerWidth;
                    height = width / targetRatio;
                }
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä—ã canvas
                canvas.style.width = width + 'px';
                canvas.style.height = height + 'px';
                
                // –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º canvas
                canvas.style.marginLeft = ((containerWidth - width) / 2) + 'px';
                canvas.style.marginTop = ((containerHeight - height) / 2) + 'px';
                
                console.log(`Canvas resized: ${width}x${height}, Container: ${containerWidth}x${containerHeight}`);
            }
            
            // –†–µ—Å–∞–π–∑ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
            window.addEventListener('load', resizeCanvas);
            window.addEventListener('resize', resizeCanvas);
            window.addEventListener('orientationchange', resizeCanvas);
            
            // –¢–∞–∫–∂–µ —Ä–µ—Å–∞–π–∑–∏–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤–∫–ª–∞–¥–∫–∏
            document.addEventListener('visibilitychange', () => {
                if (!document.hidden) {
                    setTimeout(resizeCanvas, 100);
                }
            });
            
            // –ù–∞—á–∞–ª—å–Ω—ã–π —Ä–µ—Å–∞–π–∑
            setTimeout(resizeCanvas, 100);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, starting game...');
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
            setupMobileScaling();
            
            try {
                // –°–æ–∑–¥–∞–µ–º –∏–≥—Ä—É
                window.game = new ZumaGame('gameCanvas');
                window.game.init();
                console.log('Game started successfully!');
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                function updateGameUI() {
                    if (window.game) {
                        document.getElementById('score').textContent = window.game.score;
                        document.getElementById('level').textContent = window.game.level;
                        document.getElementById('lives').textContent = window.game.lives;
                    }
                }
                
                // –ö–Ω–æ–ø–∫–∞ —Ä–µ—Å—Ç–∞—Ä—Ç–∞
                document.getElementById('restartButton').addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (window.game) {
                        window.game.restartGame();
                        updateGameUI();
                    }
                });
                
                // –ö–Ω–æ–ø–∫–∞ –ø–∞—É–∑—ã
                document.getElementById('pauseButton').addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (window.game) {
                        window.game.isPaused = !window.game.isPaused;
                        this.textContent = window.game.isPaused ? '‚ñ∂' : '‚è∏';
                        this.title = window.game.isPaused ? '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å' : '–ü–∞—É–∑–∞';
                    }
                });
                
                // –ú–æ–±–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                const rotateLeft = document.getElementById('rotateLeft');
                const rotateRight = document.getElementById('rotateRight');
                const shootBtn = document.getElementById('shootBtn');
                
                if (rotateLeft) {
                    rotateLeft.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        if (window.game) {
                            window.game.frog.angle += 8;
                            window.game.frog.state = 'aiming';
                            if (window.game.frog.angle > -30) window.game.frog.angle = -30;
                        }
                    });
                    
                    rotateLeft.addEventListener('mousedown', function(e) {
                        e.preventDefault();
                        if (window.game) {
                            window.game.frog.angle += 8;
                            window.game.frog.state = 'aiming';
                            if (window.game.frog.angle > -30) window.game.frog.angle = -30;
                        }
                    });
                }
                
                if (rotateRight) {
                    rotateRight.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        if (window.game) {
                            window.game.frog.angle -= 8;
                            window.game.frog.state = 'aiming';
                            if (window.game.frog.angle < -150) window.game.frog.angle = -150;
                        }
                    });
                    
                    rotateRight.addEventListener('mousedown', function(e) {
                        e.preventDefault();
                        if (window.game) {
                            window.game.frog.angle -= 8;
                            window.game.frog.state = 'aiming';
                            if (window.game.frog.angle < -150) window.game.frog.angle = -150;
                        }
                    });
                }
                
                if (shootBtn) {
                    shootBtn.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        if (window.game && !window.game.gameOver && !window.game.isPaused) {
                            window.game.shoot();
                        }
                    });
                    
                    shootBtn.addEventListener('mousedown', function(e) {
                        e.preventDefault();
                        if (window.game && !window.game.gameOver && !window.game.isPaused) {
                            window.game.shoot();
                        }
                    });
                }
                
                // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                document.addEventListener('keydown', function(e) {
                    if (!window.game) return;
                    
                    switch(e.code) {
                        case 'Space':
                        case 'KeyF':
                            e.preventDefault();
                            window.game.shoot();
                            break;
                        case 'ArrowLeft':
                            e.preventDefault();
                            window.game.frog.angle += 5;
                            window.game.frog.state = 'aiming';
                            if (window.game.frog.angle > -30) window.game.frog.angle = -30;
                            break;
                        case 'ArrowRight':
                            e.preventDefault();
                            window.game.frog.angle -= 5;
                            window.game.frog.state = 'aiming';
                            if (window.game.frog.angle < -150) window.game.frog.angle = -150;
                            break;
                        case 'KeyP':
                            e.preventDefault();
                            window.game.isPaused = !window.game.isPaused;
                            document.getElementById('pauseButton').textContent = window.game.isPaused ? '‚ñ∂' : '‚è∏';
                            document.getElementById('pauseButton').title = window.game.isPaused ? '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å' : '–ü–∞—É–∑–∞';
                            break;
                        case 'KeyR':
                            e.preventDefault();
                            window.game.restartGame();
                            updateGameUI();
                            break;
                        case 'Escape':
                            e.preventDefault();
                            window.game.isPaused = !window.game.isPaused;
                            document.getElementById('pauseButton').textContent = window.game.isPaused ? '‚ñ∂' : '‚è∏';
                            document.getElementById('pauseButton').title = window.game.isPaused ? '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å' : '–ü–∞—É–∑–∞';
                            break;
                    }
                });
                
                // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
                setInterval(updateGameUI, 100);
                
            } catch (error) {
                console.error('Failed to start game:', error);
                document.getElementById('ui').innerHTML = 
                    '‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.';
            }
        });
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∂–µ—Å—Ç—ã –±—Ä–∞—É–∑–µ—Ä–∞
        document.addEventListener('touchmove', function(e) {
            if (e.scale !== 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            return false;
        });
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º —Ç–∞–ø–µ –Ω–∞ iOS
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // –û—Ç–∫–ª—é—á–∞–µ–º bounce-—Å–∫—Ä–æ–ª–ª –Ω–∞ iOS
        document.addEventListener('touchmove', function(e) {
            if (e.target === document.documentElement || e.target === document.body) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // –£–ª—É—á—à–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è iOS
        if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
            // –û—Ç–∫–ª—é—á–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –∂–µ—Å—Ç–æ–≤
            document.addEventListener('gesturestart', function(e) {
                e.preventDefault();
            });
            
            // –§–∏–∫—Å–∏—Ä—É–µ–º viewport
            let viewport = document.querySelector("meta[name=viewport]");
            if (viewport) {
                viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
            }
        }
    </script>
</body>
</html>
